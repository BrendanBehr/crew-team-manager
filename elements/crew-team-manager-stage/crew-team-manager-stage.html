<link rel="import" href="../../bower_components/polymer/polymer-element.html">

<link rel="import" href="../../bower_components/app-layout/app-layout.html">
<link rel="import" href="../../bower_components/app-layout/app-drawer/app-drawer.html">
<link rel="import" href="../../bower_components/app-layout/app-header/app-header.html">
<link rel="import" href="../../bower_components/app-layout/app-toolbar/app-toolbar.html">

<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../../bower_components/iron-media-query/iron-media-query.html">

<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/paper-progress/paper-progress.html">

<link rel="import" href="../crew-team-manager-home/crew-team-manager-home.html">
<link rel="import" href="../crew-team-manager-roster/crew-team-manager-roster.html">
<link rel="import" href="../crew-team-manager-compare/crew-team-manager-compare.html">
<link rel="import" href="../crew-team-manager-pictures/crew-team-manager-pictures.html">
<link rel="import" href="../crew-team-manager-feedback/crew-team-manager-feedback.html">
<link rel="import" href="../crew-team-manager-settings/crew-team-manager-settings.html">
<link rel="import" href="../crew-team-manager-help/crew-team-manager-help.html">
<link rel="import" href="../crew-team-manager-finances/crew-team-manager-finances.html">
<link rel="import" href="../crew-team-manager-schedule/crew-team-manager-schedule.html">
<link rel="import" href="../crew-team-manager-fleet/crew-team-manager-fleet.html">

<dom-module id="crew-team-manager-stage">
    <template>
        <style>
             :host {
                @apply(--layout-horizontal);
            }


            app-drawer-layout {
                @apply(--layout-vertical);
                @apply(--layout-flex);
            }

            #pages {
                @apply(--layout-flex);
                background-color: #2E7D32;
            }

            #drawer {
                --app-drawer-scrim-background: rgba(36, 98, 40, 0.8);
            }

            #roster {
                @apply(--layout-flex);
            }

            #fleet {
                @apply(--layout-flex);
            }

            button {
                font-size: 18px;
            }
        </style>

        <app-drawer-layout>
            <iron-pages id="pages" attr-for-selected="id" selected="[[_page]]">
                <crew-team-manager-roster id="roster" on-crew-team-manager-roster-action-menu="_toggleDrawer" menu-hidden$="[[_wideLayout]]"></crew-team-manager-roster>
                <crew-team-manager-fleet id="fleet" on-crew-team-manager-fleet-action-menu="_toggleDrawer" menu-hidden$="[[_wideLayout]]"></crew-team-manager-fleet>
            </iron-pages>

            <app-drawer id="drawer" slot="drawer" opened$="[[_wideLayout]]" persistent$="[[_wideLayout]]">
                <button page="roster" on-click="_handleMenuClick">roster</button>
                <button page="fleet" on-click="_handleMenuClick">fleet</button>
            </app-drawer>
            <iron-media-query query="min-width: 600px" query-matches="{{_wideLayout}}"></iron-media-query>
    </template>

    <script>
        // Extend Polymer.Element with MyMixin
        class crewTeamManagerStage extends Polymer.Element {

            static get is() {
                return 'crew-team-manager-stage'
            }

            static get properties() {
                return {
                    _page: {
                        type: String,
                        value: 'roster'
                    },
                    _wideLayout: {
                        type: Boolean,
                        value: false,
                    },

                }
            }

            connectedCallback() {
                super.connectedCallback();
            }

            _toggleDrawer() {
                if (!this._wideLayout) {
                    this.$.drawer.toggle();
                }
            }

            _handleMenuClick(e) {
                this._page = e.target.getAttribute('page');
                this._toggleDrawer();
            }
        }

        // Register custom element definition using standard platform API
        customElements.define(crewTeamManagerStage.is, crewTeamManagerStage);
    </script>
</dom-module>